<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UHS服飾店 - 您的時尚選擇</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="announcement-bar">
        <div class="announcement-content">
            ✨ 歡迎光臨 UHS 時尚服飾店！ &nbsp;&nbsp;&nbsp;&nbsp; 🚚 全館滿 4 件衣服享免運優惠！ &nbsp;&nbsp;&nbsp;&nbsp; 🍂 秋冬新品第二件享 8 折優惠！ &nbsp;&nbsp;&nbsp;&nbsp; 📅 每日簽到領好禮！
        </div>
    </div>

    <nav class="navbar">
        <div class="navbar-container">
            <div class="logo" onclick="goToHome()" style="cursor: pointer; display: flex; align-items: center; gap: 10px;">
                <span>👗 UHS 時尚服飾店</span>
            </div>
            <div class="nav-links">
                <a href="#" onclick="goToHome(); return false;">首頁</a>
                <a href="#" onclick="goToShop(); return false;">商品</a>
                <a href="#" onclick="goToResale(); return false;">♻️ 二手轉讓</a>
                <a href="#" onclick="openSizeAssistant(); return false;">📏 尺碼助手</a>
                <a href="#" onclick="openContactModal(); return false;">💬 留言</a>
                <a href="#" onclick="openCheckIn(); return false;">📅 簽到</a>
                <a href="#" onclick="openLuckyWheel(); return false;">🎡 每日一抽</a>
                <button onclick="openCart()">
                    <span class="cart-icon">🛒
                        <span class="cart-count" id="cartCount">0</span>
                    </span>
                </button>
                <button onclick="openLogin()" id="loginBtn">登入/註冊</button>
                
                <div class="user-dropdown" id="userArea" style="display: none;">
                    <button class="user-display-btn" id="userDisplay" onclick="toggleUserDropdown()">
                        <span id="rankBadge" class="rank-badge rank-silver">銀卡</span>
                        👤 會員名稱
                    </button>
                    <div class="dropdown-menu" id="userDropdown">
                        <a href="#" onclick="openUserInfo(); return false;">📝 會員資訊</a>
                        <a href="#" onclick="showPointsNotification(); return false;">💰 我的會員點數</a>
                        <a href="#" onclick="openCoupons(); return false;">🎟️ 我的優惠券</a>
                        <a href="#" onclick="logout(); return false;">🚪 登出</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div id="resalePage" style="display: none;">
        <div class="resale-container">
            <h2 style="margin-bottom: 10px;">♻️ 賣二手衣物</h2>
            <p style="color: #666; margin-bottom: 25px;">支持永續時尚！成功提交二手衣物資訊後，即可獲得 200 點會員點數。</p>
            
            <div class="resale-form-group">
                <label>衣物名稱</label>
                <input type="text" id="resaleItemName" placeholder="例如：UHS 牛仔外套">
            </div>
            
            <div class="resale-form-group">
                <label>衣物分類</label>
                <select id="resaleCategory" style="width:100%; padding:12px; border:1px solid #ddd; border-radius:4px;">
                    <option value="衣服">衣服</option>
                    <option value="褲子">褲子</option>
                    <option value="外套">外套</option>
                    <option value="配件">配件</option>
                </select>
            </div>

            <div class="resale-form-group">
                <label>上傳衣服圖片</label>
                <input type="file" id="resaleImage" accept="image/*" onchange="previewResaleImage(this)" style="padding: 5px;">
                <img id="resaleImagePreview" class="resale-image-preview">
            </div>

            <div class="resale-form-group">
                <label>使用狀況描述</label>
                <textarea id="resaleDescription" rows="4" placeholder="請簡單描述衣物狀況 (例如：九成新、無汙點)..."></textarea>
            </div>

            <button class="btn btn-primary" onclick="submitResaleClothes()" style="width: 100%;">提交資訊並領取 200 點數</button>
            <button class="btn btn-secondary" onclick="goToHome()" style="width: 100%; margin-top: 10px;">返回首頁</button>
        </div>
    </div>

    <div class="modal-overlay" id="sizeModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('sizeModal')">✕</button>
            <h2>📏 尺碼智能助手</h2>
            <div style="margin-top: 20px;">
                <input type="number" id="userHeight" placeholder="請輸入身高 (cm)" style="width:100%; padding:12px; margin-bottom:15px; border:1px solid #ddd; border-radius:4px;">
                <input type="number" id="userWeight" placeholder="請輸入體重 (kg)" style="width:100%; padding:12px; margin-bottom:15px; border:1px solid #ddd; border-radius:4px;">
                <button class="btn btn-primary" onclick="calculateSize()" style="width: 100%;">開始分析</button>
                <div id="sizeResult" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 4px; display: none; text-align: center;">
                    <p style="font-size: 14px;">建議您的合適尺碼為：</p>
                    <p id="suggestedSize" style="font-size: 24px; font-weight: bold; color: var(--primary-color);"></p>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="contactModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('contactModal')">✕</button>
            <h2>📧 聯繫官方信箱</h2>
            <p style="font-size: 14px; color: #666; margin-bottom: 15px;">如果您有任何問題或建議，歡迎留言給我們！</p>
            <div style="margin-top: 10px;">
                <input type="text" id="contactSubject" placeholder="主旨" style="width:100%; padding:12px; margin-bottom:15px; border:1px solid #ddd; border-radius:4px;">
                <textarea id="contactMessage" placeholder="請輸入您的留言內容..." style="width:100%; padding:12px; height: 150px; margin-bottom:15px; border:1px solid #ddd; border-radius:4px; font-family: inherit; resize: none;"></textarea>
                <button class="btn btn-primary" onclick="submitContactMessage()" style="width: 100%;">發送留言</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="userInfoModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('userInfoModal')">✕</button>
            <h2>📝 會員資訊修改</h2>
            <div style="margin-top: 20px;">
                <p style="font-size: 14px; color: #666; margin-bottom: 5px;">帳號 (Email):</p>
                <p id="infoEmail" style="font-weight: bold; margin-bottom: 15px; color: var(--dark-color);"></p>
                
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 5px;">
                    <p style="font-size: 14px; color: #666;">累計消費金額:</p>
                    <p style="font-size: 11px; color: #999;">(金卡:$5,000 / 鑽石卡:$15,000)</p>
                </div>
                <p id="infoTotalSpent" style="font-weight: bold; margin-bottom: 15px; color: var(--primary-color); font-size: 1.2em;">$0</p>
                
                <input type="text" id="updateName" placeholder="修改姓名" style="width:100%; padding:12px; margin-bottom:15px; border:1px solid #ddd; border-radius:4px;">
                <input type="password" id="updatePassword" placeholder="修改密碼 (留空則不更動)" style="width:100%; padding:12px; margin-bottom:15px; border:1px solid #ddd; border-radius:4px;">
                
                <button class="btn btn-primary" onclick="processUpdateInfo()" style="width: 100%;">儲存修改</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="couponsModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('couponsModal')">✕</button>
            <h2>🎟️ 我的優惠券</h2>
            <div id="couponsList" style="margin-top: 20px; max-height: 300px; overflow-y: auto;"></div>
        </div>
    </div>

    <div id="homePage">
        <div class="hero">
            <div class="hero-content">
                <h1>歡迎來到UHS時尚服飾店</h1>
                <p>發現您的時尚風格</p>
                <button class="cta-button" onclick="goToShop()">開始購物</button>
            </div>
        </div>
        <div class="featured-section">
        <h2 class="section-title">🔥 熱銷產品</h2>
            <div style="position: relative; max-width: 1200px; margin: 0 auto; overflow: hidden;">
                <button class="nav-arrow prev" onclick="moveSlide(-1)" style="left: 10px;">&#10094;</button>
            <div class="featured-products" id="featuredProducts" style="display: flex; gap: 30px; transition: transform 0.5s ease-in-out; margin-top: 40px; justify-content: flex-start;">
            </div>
        <button class="nav-arrow next" onclick="moveSlide(1)" style="right: 10px;">&#10095;</button>
    </div>
        </div>
        <div class="categories-section">
            <div class="categories-container">
                <h2 class="section-title">🛍️ 商品分類</h2>
                <div class="category-grid" id="categoryGrid"></div>
            </div>
        </div>
    </div>

    <div id="shopPage" style="display: none; padding-top: 20px; min-height: 100vh;">
        <div class="main-container">
            <div class="sidebar">
                <div class="filter-title">🔍 篩選</div>
    
                <div style="margin-bottom: 20px;">
                <input type="text" id="searchInput" placeholder="搜尋商品名稱..." oninput="filterProducts()" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
    <div id="filterCategoryContainer"></div>
    <div class="price-range">
        <p>最高: $<span id="priceValue">2000</span></p>
        <input type="range" id="priceRange" min="0" max="2000" value="2000" onchange="filterProducts()">
    </div>
</div>
            <div class="products-section" id="productsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px;"></div>
        </div>
    </div>

    <div class="modal-overlay" id="checkInModal">
        <div class="modal-content" style="text-align: center;">
            <button class="close-btn" onclick="closeCheckIn()">✕</button>
            <h2>📅 每日簽到</h2>
            <div class="checkin-grid" id="checkInGrid"></div>
            <p>目前點數：<span class="points-val">0</span></p>
            <button class="btn btn-primary" id="checkInBtn" onclick="processCheckIn()" style="width:100%; margin-top:10px">立即簽到</button>
        </div>
    </div>

    <div class="modal-overlay" id="wheelModal">
        <div class="modal-content" style="text-align: center; max-width: 500px;">
            <button class="close-btn" onclick="closeLuckyWheel()">✕</button>
            <h2>🎡 每日幸運一抽</h2>
            <p style="font-size: 14px; color: #666; margin-bottom: 10px;">每天都有一次免費試手氣的機會！</p>
            <div style="position: relative; width: 300px; margin: 0 auto;">
                <div class="wheel-pointer"></div>
                <div class="wheel-container" id="wheel"></div>
            </div>
            <button class="btn btn-primary" id="spinBtn" onclick="spinWheel()" style="width:100%; margin-top:20px; background: #f39c12;">立即抽獎</button>
        </div>
    </div>

<div class="modal-overlay" id="cartModal">
    <div class="modal-content" style="max-width: 500px; max-height: 90vh; overflow-y: auto;">
        <button class="close-btn" onclick="closeCart()">✕</button>
        <h2>🛒 購物車結帳</h2>
        <div id="cartItems" style="margin:15px 0"></div>
        
        <div style="background: #f9f9f9; padding: 15px; border-radius: 8px; margin-bottom: 15px; text-align: left;">
            <label style="font-weight:bold; font-size:14px;">收件人資訊(必填)</label>
            <input type="text" id="orderName" placeholder="收件人姓名" style="width:100%; padding:8px; margin-top:5px; border:1px solid #ddd; border-radius:4px;">
            <input type="tel" id="orderPhone" placeholder="聯絡電話" style="width:100%; padding:8px; margin-top:8px; border:1px solid #ddd; border-radius:4px;">
            
            <div style="margin-top:10px;">
                <label style="font-size:13px; color:#666;">到貨地址(必填)</label>
                <div style="display: flex; gap: 5px; margin-top:5px;">
                    <input type="text" id="addr1" placeholder="國家(例:台灣)" style="flex:1; padding:8px; border:1px solid #ddd; border-radius:4px;">
                    <input type="text" id="addr2" placeholder="縣市" style="flex:1; padding:8px; border:1px solid #ddd; border-radius:4px;">
                </div>
                <div style="display: flex; gap: 5px; margin-top:5px;">
                    <input type="text" id="addr3" placeholder="區域" style="flex:1; padding:8px; border:1px solid #ddd; border-radius:4px;">
                    <input type="text" id="addr4" placeholder="街道門牌" style="flex:2; padding:8px; border:1px solid #ddd; border-radius:4px;">
                </div>
            </div>
        </div>

        <div style="background: #f0f7ff; padding: 15px; border-radius: 8px; margin-bottom: 15px; text-align: left;">
            <label style="font-weight:bold; font-size:14px;">付款方式</label>
            <select id="paymentMethod" style="width:100%; padding:8px; margin-top:5px; border:1px solid #ddd; border-radius:4px;">
                <option value="現金付款">現金付款</option>
                <option value="行動支付" disabled>行動支付 (即將登場)</option>
                <option value="信用卡" disabled>信用卡 (即將登場)</option>
            </select>
        </div>

        <div style="margin-bottom: 10px; padding: 10px; background: #fff; border: 1px solid #eee; border-radius: 4px;">
            <label style="font-size: 13px; font-weight: bold;">🎟️ 優惠券：</label>
            <select id="couponSelector" onchange="displayCart()" style="width:100%; padding:5px; border-radius:4px; border:1px solid #ccc;"></select>
        </div>

        <div style="margin-bottom: 10px; padding: 10px; background: #fff4e5; border-radius: 4px;">
            <label style="font-size: 13px; font-weight: bold;">💰 點數折抵：</label>
            <div style="display: flex; gap: 5px; margin-top:5px;">
                <input type="number" id="usePointsAmount" placeholder="100倍數" oninput="displayCart()" onchange="this.value = Math.floor(this.value/100)*100; displayCart();" step="100" min="0" style="flex: 1; padding: 5px;">
                <button class="btn-secondary" onclick="useMaxPoints()" style="padding:0 5px; font-size:11px;">全部折抵</button>
            </div>
        </div>

        <div id="discountInfo" style="color: var(--primary-color); font-size: 13px; margin-bottom: 5px; font-weight: bold;"></div>
        <p style="text-align:right; font-weight:bold; font-size: 1.2em;">實付總計：<span id="cartTotal">$0</span></p>
        <button class="btn btn-primary" style="width:100%; margin-top:15px;" onclick="checkoutProcess()">確認下單並支付</button>
    </div>
</div>

<div class="modal-overlay" id="orderSuccessModal">
    <div class="modal-content" style="text-align: left;">
        <h2 style="color: #2ecc71; text-align: center;">🎉 訂單已建立</h2>
        <div id="orderDetailContent" style="margin: 20px 0; line-height: 1.8; border-top: 1px solid #eee; padding-top: 15px;"></div>
        <button class="btn btn-primary" style="width: 100%;" onclick="closeModal('orderSuccessModal')">關閉</button>
    </div>
</div>

    <div class="modal-overlay" id="loginModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeLogin()">✕</button>
            <div id="loginForm">
                <h2>🔐 會員登入</h2>
                <input type="email" id="loginEmail" placeholder="電子郵件" style="width:100%; padding:12px; margin:15px 0; border:1px solid #ddd; border-radius:4px;">
                <input type="password" id="loginPassword" placeholder="密碼" style="width:100%; padding:12px; margin-bottom:15px; border:1px solid #ddd; border-radius:4px;">
                <div style="text-align: left; margin-bottom: 15px; font-size: 14px;">
                    <input type="checkbox" id="rememberMe"> <label for="rememberMe">記住我的帳號</label>
                </div>
                <button class="btn btn-primary" onclick="performLogin()" style="width: 100%;">登入</button>
                <p style="margin-top:15px; text-align:center; font-size:14px;">還沒有帳號？ <a href="#" onclick="toggleAuthForm('register'); return false;">立即註冊</a></p>
            </div>
            <div id="registerForm" style="display: none;">
                <h2>📝 註冊新會員</h2>
                <input type="text" id="regName" placeholder="姓名" style="width:100%; padding:12px; margin:15px 0; border:1px solid #ddd; border-radius:4px;">
                <input type="email" id="regEmail" placeholder="電子郵件" style="width:100%; padding:12px; margin-bottom:15px; border:1px solid #ddd; border-radius:4px;">
                <input type="password" id="regPassword" placeholder="設定密碼" style="width:100%; padding:12px; margin-bottom:15px; border:1px solid #ddd; border-radius:4px;">
                <button class="btn btn-primary" onclick="performRegister()" style="width: 100%; background:var(--secondary-color)">完成註冊</button>
                <p style="margin-top:15px; text-align:center; font-size:14px;">已有帳號？ <a href="#" onclick="toggleAuthForm('login'); return false;">返回登入</a></p>
            </div>
        </div>
    </div> 
    <div id="miniGamePage">
    <div class="game-wrapper">
        <h2>🎮 UHS 時尚記憶翻牌賽</h2>
        <p style="color: #666; margin-top: 10px;">找出兩兩成對的單品，成功可獲得 100 點數！</p>
        <div id="gameGridBox" class="game-grid"></div>
        <button class="btn btn-primary" id="gameActionBtn" onclick="runMemoryGameStart()" style="width: 100%;">開始遊戲挑戰</button>
        <button class="btn btn-secondary" onclick="backToMainFromGame()" style="width: 100%; margin-top: 10px;">返回首頁</button>
    </div>
</div>
    <script src="script.js"></script>
</body>
</html>