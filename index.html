<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊôÇÂ∞öÊúçÈ£æÂ∫ó - ÊÇ®ÁöÑÊôÇÂ∞öÈÅ∏Êìá</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #ff6b6b;
            --secondary-color: #4ecdc4;
            --dark-color: #2c3e50;
            --light-color: #ecf0f1;
            --text-color: #333;
            --border-radius: 8px;
            --box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Microsoft JhengHei', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #f8f9fa;
        }

        /* ========== Â∞éËà™Ê¨Ñ ========== */
        .navbar {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--box-shadow);
        }

        .navbar-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .nav-links {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .nav-links a, .nav-links button {
            color: white;
            text-decoration: none;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 16px;
            transition: opacity 0.3s;
        }

        .nav-links a:hover, .nav-links button:hover {
            opacity: 0.8;
        }

        .cart-icon {
            position: relative;
            font-size: 24px;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff3838;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        /* ========== È¶ñÈ†ÅËã±ÈõÑÂçÄ ========== */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), 
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><rect fill="%23ff6b6b" width="1200" height="600"/><circle cx="200" cy="150" r="100" fill="%234ecdc4" opacity="0.3"/><circle cx="1000" cy="450" r="150" fill="%234ecdc4" opacity="0.3"/></svg>');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            height: 600px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            z-index: 2;
            animation: slideInDown 1s ease-out;
        }

        .hero h1 {
            font-size: 56px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .hero p {
            font-size: 24px;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .cta-button {
            background: var(--primary-color);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }

        .cta-button:hover {
            background: #ff5252;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
        }

        /* ========== ÁÜ±Èä∑Áî¢ÂìÅÂçÄ ========== */
        .featured-section {
            padding: 60px 20px;
            background: white;
            text-align: center;
        }

        .section-title {
            font-size: 36px;
            margin-bottom: 50px;
            color: var(--dark-color);
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 4px;
            background: var(--primary-color);
            border-radius: 2px;
        }

        .featured-products {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .product-card {
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
            transition: all 0.3s;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .product-image {
            width: 100%;
            height: 250px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
            position: relative;
            overflow: hidden;
        }

        .product-image.hat { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .product-image.shirt { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .product-image.jeans { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .product-image.jacket { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
        .product-image.pants { background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); }
        .product-image.socks { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
        .product-image.gloves { background: linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%); }

        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff3838;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }

        .product-info {
            padding: 20px;
        }

        .product-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--dark-color);
        }

        .product-rating {
            color: #ffc107;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .product-price {
            font-size: 24px;
            color: var(--primary-color);
            font-weight: bold;
            margin-bottom: 8px;
        }

        .product-sales {
            color: #999;
            font-size: 12px;
            margin-bottom: 15px;
        }

        .add-to-cart-btn {
            width: 100%;
            padding: 10px;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .add-to-cart-btn:hover {
            background: #3ab8b0;
        }

        /* ========== ÂàÜÈ°ûÂçÄ ========== */
        .categories-section {
            padding: 60px 20px;
            background: #f8f9fa;
        }

        .categories-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .category-card {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--box-shadow);
        }

        .category-card:hover {
            background: var(--primary-color);
            color: white;
            transform: scale(1.05);
        }

        .category-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .category-name {
            font-size: 18px;
            font-weight: bold;
        }

        /* ========== ‰∏ªÂÆπÂô® ========== */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
            min-height: 600px;
        }

        /* ========== ÂÅ¥ÈÇäÊ¨ÑÁØ©ÈÅ∏ ========== */
        .sidebar {
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            height: fit-content;
            position: sticky;
            top: 80px;
        }

        .filter-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            color: var(--dark-color);
        }

        .filter-group {
            margin-bottom: 25px;
        }

        .filter-group h4 {
            font-size: 14px;
            margin-bottom: 10px;
            color: var(--dark-color);
        }

        .filter-option {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            cursor: pointer;
        }

        .filter-option input {
            margin-right: 8px;
            cursor: pointer;
        }

        .filter-option label {
            cursor: pointer;
            flex: 1;
        }

        .price-range {
            margin-top: 10px;
        }

        .price-range input {
            width: 100%;
            margin-bottom: 8px;
        }

        .price-display {
            font-size: 14px;
            color: var(--primary-color);
            font-weight: bold;
        }

        /* ========== ÂïÜÂìÅÂçÄ ========== */
        .products-section {
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        .products-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .sort-select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        /* ========== Ë≥ºÁâ©Ëªä ========== */
        .cart-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .cart-modal.active {
            display: flex;
        }

        .cart-content {
            background: white;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
            animation: slideUp 0.3s ease-out;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 28px;
            cursor: pointer;
            background: none;
            border: none;
            color: #999;
            transition: color 0.3s;
        }

        .close-btn:hover {
            color: var(--primary-color);
        }

        .cart-title {
            font-size: 28px;
            margin-bottom: 20px;
            color: var(--dark-color);
        }

        .cart-items {
            margin-bottom: 20px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
            gap: 15px;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: var(--primary-color);
            font-weight: bold;
        }

        .cart-item-qty {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .qty-btn {
            width: 25px;
            height: 25px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 3px;
            transition: all 0.2s;
        }

        .qty-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .remove-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .remove-btn:hover {
            background: #ff3838;
        }

        .cart-summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .summary-row.total {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-color);
            border-top: 2px solid #ddd;
            padding-top: 10px;
        }

        .cart-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #ff5252;
        }

        .btn-secondary {
            background: #ddd;
            color: var(--dark-color);
        }

        .btn-secondary:hover {
            background: #ccc;
        }

        /* ========== ÁôªÂÖ•Ê®°ÊÖã ========== */
        .login-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .login-modal.active {
            display: flex;
        }

        .login-content {
            background: white;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 400px;
            padding: 40px;
            position: relative;
            animation: slideUp 0.3s ease-out;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--dark-color);
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
        }

        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        .form-actions button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .form-actions .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .form-actions .btn-primary:hover {
            background: #ff5252;
        }

        .form-actions .btn-secondary {
            background: #ddd;
            color: var(--dark-color);
        }

        /* ========== ÁµêÂ∏≥È†ÅÈù¢ ========== */
        .checkout-container {
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        .checkout-title {
            font-size: 32px;
            margin-bottom: 30px;
            color: var(--dark-color);
        }

        .checkout-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .checkout-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
        }

        .checkout-section h3 {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--dark-color);
        }

        .payment-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .payment-option {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-option:hover {
            border-color: var(--primary-color);
            background: rgba(255, 107, 107, 0.05);
        }

        .payment-option input {
            margin-right: 10px;
            cursor: pointer;
        }

        .order-summary {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .order-total {
            display: flex;
            justify-content: space-between;
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-color);
            padding-top: 10px;
            margin-top: 10px;
            border-top: 2px solid #eee;
        }

        .checkout-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        /* ========== ÂãïÁï´ ========== */
        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ========== ÈüøÊáâÂºèË®≠Ë®à ========== */
        @media (max-width: 768px) {
            .main-container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: static;
            }

            .hero h1 {
                font-size: 36px;
            }

            .hero p {
                font-size: 18px;
            }

            .checkout-grid {
                grid-template-columns: 1fr;
            }

            .nav-links {
                gap: 15px;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .category-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* ========== ÈÄöÁü• ========== */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: 15px 20px;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 3000;
            animation: slideInDown 0.3s ease-out;
        }

        .notification.success {
            background: #2ecc71;
        }

        .notification.error {
            background: #e74c3c;
        }

        .empty-cart {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .empty-cart-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- Â∞éËà™Ê¨Ñ -->
    <nav class="navbar">
        <div class="navbar-container">
            <div class="logo" onclick="goToHome()">üëó ÊôÇÂ∞öÊúçÈ£æÂ∫ó</div>
            <div class="nav-links">
                <a href="#" onclick="goToHome(); return false;">È¶ñÈ†Å</a>
                <a href="#" onclick="goToShop(); return false;">ÂïÜÂìÅ</a>
                <button onclick="openCart()">
                    <span class="cart-icon">üõí
                        <span class="cart-count" id="cartCount">0</span>
                    </span>
                </button>
                <button onclick="openLogin()" id="loginBtn">ÁôªÂÖ•</button>
                <button onclick="logout()" id="logoutBtn" style="display: none;">ÁôªÂá∫</button>
                <span id="userDisplay" style="display: none;"></span>
            </div>
        </div>
    </nav>

    <!-- È¶ñÈ†Å -->
    <div id="homePage">
        <!-- Ëã±ÈõÑÂçÄ -->
        <div class="hero">
            <div class="hero-content">
                <h1>Ê≠°Ëøé‰æÜÂà∞ÊôÇÂ∞öÊúçÈ£æÂ∫ó</h1>
                <p>ÁôºÁèæÊÇ®ÁöÑÊôÇÂ∞öÈ¢®Ê†º</p>
                <button class="cta-button" onclick="goToShop()">ÈñãÂßãË≥ºÁâ©</button>
            </div>
        </div>

        <!-- ÁÜ±Èä∑Áî¢ÂìÅ -->
        <div class="featured-section">
            <h2 class="section-title">üî• ÁÜ±Èä∑Áî¢ÂìÅ</h2>
            <div class="featured-products" id="featuredProducts"></div>
        </div>

        <!-- ÂàÜÈ°ûÂçÄ -->
        <div class="categories-section">
            <div class="categories-container">
                <h2 class="section-title">üõçÔ∏è ÂïÜÂìÅÂàÜÈ°û</h2>
                <div class="category-grid" id="categoryGrid"></div>
            </div>
        </div>
    </div>

    <!-- ÂïÜÂìÅÈ†ÅÈù¢ -->
    <div id="shopPage" style="display: none; padding-top: 20px; min-height: 100vh;">
        <div class="main-container">
            <!-- ÂÅ¥ÈÇäÊ¨ÑÁØ©ÈÅ∏ -->
            <div class="sidebar">
                <div class="filter-title">üîç ÁØ©ÈÅ∏</div>

                <div class="filter-group">
                    <h4>ÂàÜÈ°û</h4>
                    <div class="filter-option">
                        <input type="checkbox" id="cat-all" checked onchange="filterProducts()">
                        <label for="cat-all">ÂÖ®ÈÉ®</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="cat-hat" onchange="filterProducts()">
                        <label for="cat-hat">Â∏ΩÂ≠ê</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="cat-shirt" onchange="filterProducts()">
                        <label for="cat-shirt">Ë°£Êúç</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="cat-jeans" onchange="filterProducts()">
                        <label for="cat-jeans">Áâõ‰ªîË§≤</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="cat-jacket" onchange="filterProducts()">
                        <label for="cat-jacket">Â§ñÂ•ó</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="cat-pants" onchange="filterProducts()">
                        <label for="cat-pants">Ë§≤Â≠ê</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="cat-socks" onchange="filterProducts()">
                        <label for="cat-socks">Ë•™Â≠ê</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="cat-gloves" onchange="filterProducts()">
                        <label for="cat-gloves">ÊâãÂ•ó</label>
                    </div>
                </div>

                <div class="filter-group">
                    <h4>Ê¨æÂºè</h4>
                    <div class="filter-option">
                        <input type="checkbox" id="style-all" checked onchange="filterProducts()">
                        <label for="style-all">ÂÖ®ÈÉ®</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="style-male" onchange="filterProducts()">
                        <label for="style-male">Áî∑Ê¨æ</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="style-female" onchange="filterProducts()">
                        <label for="style-female">Â•≥Ê¨æ</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="style-kids" onchange="filterProducts()">
                        <label for="style-kids">Â∞èÂ≠©Ê¨æ</label>
                    </div>
                </div>

                <div class="filter-group">
                    <h4>ÂÉπÊ†ºÁØÑÂúç</h4>
                    <div class="price-range">
                        <input type="range" id="priceRange" min="0" max="2000" value="2000" onchange="filterProducts()">
                        <div class="price-display">ÊúÄÈ´ò: $<span id="priceValue">2000</span></div>
                    </div>
                </div>
            </div>

            <!-- ÂïÜÂìÅÂçÄ -->
            <div class="products-section">
                <div class="products-header">
                    <h2>ÂïÜÂìÅÂàóË°®</h2>
                    <select class="sort-select" onchange="sortProducts(this.value)">
                        <option value="newest">ÊúÄÊñ∞</option>
                        <option value="price-low">ÂÉπÊ†º‰ΩéÂà∞È´ò</option>
                        <option value="price-high">ÂÉπÊ†ºÈ´òÂà∞‰Ωé</option>
                        <option value="popular">ÊúÄÂèóÊ≠°Ëøé</option>
                    </select>
                </div>
                <div class="products-grid" id="productsGrid"></div>
            </div>
        </div>
    </div>

    <!-- ÁµêÂ∏≥È†ÅÈù¢ -->
    <div id="checkoutPage" style="display: none; padding-top: 20px; min-height: 100vh;">
        <div class="checkout-container">
            <h1 class="checkout-title">‚úì ÁµêÂ∏≥</h1>

            <div class="checkout-grid">
                <!-- Êî∂‰ª∂Ë≥áË®ä -->
                <div class="checkout-section">
                    <h3>üìç Êî∂‰ª∂Ë≥áË®ä</h3>
                    <div class="form-group">
                        <label>ÂßìÂêç</label>
                        <input type="text" id="recipientName" placeholder="Ë´ãËº∏ÂÖ•ÂßìÂêç">
                    </div>
                    <div class="form-group">
                        <label>ÈõªË©±</label>
                        <input type="tel" id="recipientPhone" placeholder="Ë´ãËº∏ÂÖ•ÈõªË©±">
                    </div>
                    <div class="form-group">
                        <label>Gmail</label>
                        <input type="email" id="recipientEmail" placeholder="Ë´ãËº∏ÂÖ• Gmail">
                    </div>
                </div>

                <!-- ‰ªòÊ¨æÊñπÂºè -->
                <div class="checkout-section">
                    <h3>üí≥ ‰ªòÊ¨æÊñπÂºè</h3>
                    <div class="payment-options">
                        <label class="payment-option">
                            <input type="radio" name="payment" value="cash" checked>
                            <span>üíµ ÁèæÈáë‰ªòÊ¨æ</span>
                        </label>
                        <label class="payment-option">
                            <input type="radio" name="payment" value="credit">
                            <span>üí≥ ‰ø°Áî®Âç°‰ªòÊ¨æ</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Ë®ÇÂñÆÊëòË¶Å -->
            <div class="order-summary">
                <h3>üìã Ë®ÇÂñÆÊëòË¶Å</h3>
                <div id="checkoutItems"></div>
                <div class="order-total">
                    <span>Á∏ΩÈáëÈ°ç</span>
                    <span id="checkoutTotal">$0</span>
                </div>
            </div>

            <!-- Êìç‰ΩúÊåâÈàï -->
            <div class="checkout-actions">
                <button class="btn btn-secondary" onclick="goToShop()">ËøîÂõûË≥ºÁâ©</button>
                <button class="btn btn-primary" onclick="completeOrder()">ÂÆåÊàêË®ÇÂñÆ</button>
            </div>
        </div>
    </div>

    <!-- Ë≥ºÁâ©ËªäÊ®°ÊÖã -->
    <div class="cart-modal" id="cartModal">
        <div class="cart-content">
            <button class="close-btn" onclick="closeCart()">‚úï</button>
            <h2 class="cart-title">üõí Ë≥ºÁâ©Ëªä</h2>
            <div class="cart-items" id="cartItems"></div>
            <div class="cart-summary">
                <div class="summary-row">
                    <span>Â∞èË®à</span>
                    <span id="subtotal">$0</span>
                </div>
                <div class="summary-row">
                    <span>ÈÅãË≤ª</span>
                    <span>$0</span>
                </div>
                <div class="summary-row total">
                    <span>Á∏ΩË®à</span>
                    <span id="cartTotal">$0</span>
                </div>
            </div>
            <div class="cart-actions">
                <button class="btn btn-secondary" onclick="closeCart()">ÁπºÁ∫åË≥ºÁâ©</button>
                <button class="btn btn-primary" onclick="proceedToCheckout()">ÂâçÂæÄÁµêÂ∏≥</button>
            </div>
        </div>
    </div>

    <!-- ÁôªÂÖ•Ê®°ÊÖã -->
    <div class="login-modal" id="loginModal">
        <div class="login-content">
            <button class="close-btn" onclick="closeLogin()">‚úï</button>
            <h2 style="margin-bottom: 25px; color: var(--dark-color);">üîê ‰ΩøÁî®ËÄÖÁôªÂÖ•</h2>
            <div class="form-group">
                <label>ÈõªÂ≠êÈÉµ‰ª∂</label>
                <input type="email" id="loginEmail" placeholder="Ë´ãËº∏ÂÖ•ÈõªÂ≠êÈÉµ‰ª∂">
            </div>
            <div class="form-group">
                <label>ÂØÜÁ¢º</label>
                <input type="password" id="loginPassword" placeholder="Ë´ãËº∏ÂÖ•ÂØÜÁ¢º">
            </div>
            <div class="form-actions">
                <button class="btn btn-primary" onclick="performLogin()">ÁôªÂÖ•</button>
                <button class="btn btn-secondary" onclick="closeLogin()">ÂèñÊ∂à</button>
            </div>
        </div>
    </div>

    <script>
        // ========== Ë≥áÊñô ==========
        const categories = ['Â∏ΩÂ≠ê', 'Ë°£Êúç', 'Áâõ‰ªîË§≤', 'Â§ñÂ•ó', 'Ë§≤Â≠ê', 'Ë•™Â≠ê', 'ÊâãÂ•ó'];
        const styles = ['Áî∑Ê¨æ', 'Â•≥Ê¨æ', 'Â∞èÂ≠©Ê¨æ'];
        const categoryIcons = ['üß¢', 'üëï', 'üëñ', 'üß•', 'üëî', 'üß¶', 'üß§'];

        let products = [];
        let cart = [];
        let currentUser = null;
        let filteredProducts = [];

        // ÁîüÊàêÂïÜÂìÅ
        function generateProducts() {
            const categoryMap = {
                'Â∏ΩÂ≠ê': 'hat',
                'Ë°£Êúç': 'shirt',
                'Áâõ‰ªîË§≤': 'jeans',
                'Â§ñÂ•ó': 'jacket',
                'Ë§≤Â≠ê': 'pants',
                'Ë•™Â≠ê': 'socks',
                'ÊâãÂ•ó': 'gloves'
            };

            let id = 1;
            categories.forEach((cat, catIndex) => {
                styles.forEach(style => {
                    for (let i = 0; i < 3; i++) {
                        products.push({
                            id: id++,
                            name: `${cat} - ${style} #${i + 1}`,
                            category: cat,
                            categoryKey: categoryMap[cat],
                            style: style,
                            price: Math.floor(Math.random() * 1500) + 300,
                            rating: (Math.random() * 2 + 3).toFixed(1),
                            reviews: Math.floor(Math.random() * 500) + 10,
                            sales: Math.floor(Math.random() * 1000) + 50,
                            image: categoryMap[cat],
                            isFeatured: Math.random() > 0.7
                        });
                    }
                });
            });

            filteredProducts = [...products];
        }

        // ========== ÂàùÂßãÂåñ ==========
        function init() {
            generateProducts();
            displayFeaturedProducts();
            displayCategories();
            displayProducts();
            loadCart();
        }

        // ========== È¶ñÈ†ÅÂäüËÉΩ ==========
        function displayFeaturedProducts() {
            const featured = products.filter(p => p.isFeatured).slice(0, 4);
            const html = featured.map(p => `
                <div class="product-card">
                    <div class="product-image ${p.categoryKey}">
                        ${categoryIcons[categories.indexOf(p.category)]}
                        <div class="product-badge">ÁÜ±Èä∑</div>
                    </div>
                    <div class="product-info">
                        <div class="product-name">${p.name}</div>
                        <div class="product-rating">‚≠ê ${p.rating} (${p.reviews} Ë©ïÂÉπ)</div>
                        <div class="product-price">$${p.price}</div>
                        <div class="product-sales">Â∑≤ÂîÆ ${p.sales} ‰ª∂</div>
                        <button class="add-to-cart-btn" onclick="addToCart(${p.id})">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                    </div>
                </div>
            `).join('');
            document.getElementById('featuredProducts').innerHTML = html;
        }

        function displayCategories() {
            const html = categories.map((cat, i) => `
                <div class="category-card" onclick="filterByCategory('${cat}')">
                    <div class="category-icon">${categoryIcons[i]}</div>
                    <div class="category-name">${cat}</div>
                </div>
            `).join('');
            document.getElementById('categoryGrid').innerHTML = html;
        }

        // ========== ÂïÜÂìÅÈ†ÅÈù¢ ==========
        function displayProducts() {
            const html = filteredProducts.map(p => `
                <div class="product-card">
                    <div class="product-image ${p.categoryKey}">
                        ${categoryIcons[categories.indexOf(p.category)]}
                    </div>
                    <div class="product-info">
                        <div class="product-name">${p.name}</div>
                        <div class="product-rating">‚≠ê ${p.rating} (${p.reviews})</div>
                        <div class="product-price">$${p.price}</div>
                        <div class="product-sales">Â∑≤ÂîÆ ${p.sales} ‰ª∂</div>
                        <button class="add-to-cart-btn" onclick="addToCart(${p.id})">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                    </div>
                </div>
            `).join('');
            document.getElementById('productsGrid').innerHTML = html || '<p style="text-align: center; color: #999;">Ê≤íÊúâÊâæÂà∞Á¨¶ÂêàÊ¢ù‰ª∂ÁöÑÂïÜÂìÅ</p>';
        }

        // ========== ÁØ©ÈÅ∏ÂäüËÉΩ ==========
        function filterProducts() {
            const selectedCats = [];
            const selectedStyles = [];
            const maxPrice = parseInt(document.getElementById('priceRange').value);

            // ÂèñÂæóÈÅ∏‰∏≠ÁöÑÂàÜÈ°û
            categories.forEach(cat => {
                const key = 'cat-' + cat.toLowerCase().replace(/[^a-z]/g, '');
                const checkbox = document.getElementById(key);
                if (checkbox && checkbox.checked && checkbox.id !== 'cat-all') {
                    selectedCats.push(cat);
                }
            });

            // ÂèñÂæóÈÅ∏‰∏≠ÁöÑÊ¨æÂºè
            styles.forEach(style => {
                const key = 'style-' + (style === 'Áî∑Ê¨æ' ? 'male' : style === 'Â•≥Ê¨æ' ? 'female' : 'kids');
                const checkbox = document.getElementById(key);
                if (checkbox && checkbox.checked && checkbox.id !== 'style-all') {
                    selectedStyles.push(style);
                }
            });

            // Â¶ÇÊûúÂÖ®ÈÅ∏Ë¢´ÂãæÈÅ∏ÔºåÂâáÈ°ØÁ§∫ÂÖ®ÈÉ®
            if (document.getElementById('cat-all').checked) {
                filteredProducts = products.filter(p => p.price <= maxPrice);
            } else if (selectedCats.length > 0) {
                filteredProducts = products.filter(p => 
                    selectedCats.includes(p.category) && p.price <= maxPrice
                );
            } else {
                filteredProducts = [];
            }

            // ÊáâÁî®Ê¨æÂºèÁØ©ÈÅ∏
            if (document.getElementById('style-all').checked) {
                // ‰øùÊåÅÁèæÊúâÁØ©ÈÅ∏
            } else if (selectedStyles.length > 0) {
                filteredProducts = filteredProducts.filter(p => selectedStyles.includes(p.style));
            } else if (selectedStyles.length === 0 && !document.getElementById('style-all').checked) {
                filteredProducts = [];
            }

            // Êõ¥Êñ∞ÂÉπÊ†ºÈ°ØÁ§∫
            document.getElementById('priceValue').textContent = maxPrice;
            displayProducts();
        }

        function filterByCategory(cat) {
            document.getElementById('cat-all').checked = false;
            categories.forEach(c => {
                const key = 'cat-' + c.toLowerCase().replace(/[^a-z]/g, '');
                document.getElementById(key).checked = (c === cat);
            });
            filterProducts();
            goToShop();
        }

        function sortProducts(sortType) {
            switch(sortType) {
                case 'price-low':
                    filteredProducts.sort((a, b) => a.price - b.price);
                    break;
                case 'price-high':
                    filteredProducts.sort((a, b) => b.price - a.price);
                    break;
                case 'popular':
                    filteredProducts.sort((a, b) => b.sales - a.sales);
                    break;
                default:
                    filteredProducts.sort((a, b) => b.id - a.id);
            }
            displayProducts();
        }

        // ========== Ë≥ºÁâ©ËªäÂäüËÉΩ ==========
        function addToCart(productId) {
            if (!currentUser) {
                showNotification('Ë´ãÂÖàÁôªÂÖ•', 'error');
                openLogin();
                return;
            }

            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);

            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({...product, quantity: 1});
            }

            saveCart();
            showNotification(`Â∑≤Â∞á ${product.name} Âä†ÂÖ•Ë≥ºÁâ©Ëªä`, 'success');
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveCart();
            displayCart();
        }

        function updateQuantity(productId, quantity) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity = Math.max(1, quantity);
                saveCart();
                displayCart();
            }
        }

        function displayCart() {
            if (cart.length === 0) {
                document.getElementById('cartItems').innerHTML = '<div class="empty-cart"><div class="empty-cart-icon">üõí</div><p>Ë≥ºÁâ©ËªäÊòØÁ©∫ÁöÑ</p></div>';
                document.getElementById('subtotal').textContent = '$0';
                document.getElementById('cartTotal').textContent = '$0';
                return;
            }

            const html = cart.map(item => `
                <div class="cart-item">
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">$${item.price}</div>
                    </div>
                    <div class="cart-item-qty">
                        <button class="qty-btn" onclick="updateQuantity(${item.id}, ${item.quantity - 1})">-</button>
                        <span style="width: 30px; text-align: center;">${item.quantity}</span>
                        <button class="qty-btn" onclick="updateQuantity(${item.id}, ${item.quantity + 1})">+</button>
                    </div>
                    <div style="font-weight: bold; color: var(--primary-color); min-width: 80px; text-align: right;">$${item.price * item.quantity}</div>
                    <button class="remove-btn" onclick="removeFromCart(${item.id})">ÁßªÈô§</button>
                </div>
            `).join('');

            document.getElementById('cartItems').innerHTML = html;

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('subtotal').textContent = '$' + subtotal;
            document.getElementById('cartTotal').textContent = '$' + subtotal;
        }

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
        }

        function loadCart() {
            const saved = localStorage.getItem('cart');
            if (saved) {
                cart = JSON.parse(saved);
                updateCartCount();
            }
        }

        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }

        // ========== ÁôªÂÖ•ÂäüËÉΩ ==========
        function performLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                showNotification('Ë´ãËº∏ÂÖ•ÈõªÂ≠êÈÉµ‰ª∂ÂíåÂØÜÁ¢º', 'error');
                return;
            }

            currentUser = {
                email: email,
                name: email.split('@')[0]
            };

            document.getElementById('userDisplay').textContent = `üë§ ${currentUser.name}`;
            document.getElementById('userDisplay').style.display = 'inline';
            document.getElementById('loginBtn').style.display = 'none';
            document.getElementById('logoutBtn').style.display = 'inline';

            closeLogin();
            showNotification(`Ê≠°ËøéÂõû‰æÜ, ${currentUser.name}!`, 'success');
        }

        function logout() {
            currentUser = null;
            cart = [];
            localStorage.removeItem('cart');
            updateCartCount();
            document.getElementById('userDisplay').style.display = 'none';
            document.getElementById('loginBtn').style.display = 'inline';
            document.getElementById('logoutBtn').style.display = 'none';
            goToHome();
            showNotification('Â∑≤ÁôªÂá∫', 'success');
        }

        // ========== ÁµêÂ∏≥ÂäüËÉΩ ==========
        function proceedToCheckout() {
            if (!currentUser) {
                showNotification('Ë´ãÂÖàÁôªÂÖ•', 'error');
                closeCart();
                openLogin();
                return;
            }

            if (cart.length === 0) {
                showNotification('Ë≥ºÁâ©ËªäÊòØÁ©∫ÁöÑ', 'error');
                return;
            }

            displayCheckout();
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('shopPage').style.display = 'none';
            document.getElementById('checkoutPage').style.display = 'block';
            closeCart();
        }

        function displayCheckout() {
            const html = cart.map(item => `
                <div class="order-item">
                    <span>${item.name} √ó ${item.quantity}</span>
                    <span>$${item.price * item.quantity}</span>
                </div>
            `).join('');

            document.getElementById('checkoutItems').innerHTML = html;

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('checkoutTotal').textContent = '$' + total;
        }

        function completeOrder() {
            const name = document.getElementById('recipientName').value;
            const phone = document.getElementById('recipientPhone').value;
            const email = document.getElementById('recipientEmail').value;
            const payment = document.querySelector('input[name="payment"]:checked').value;

            if (!name || !phone || !email) {
                showNotification('Ë´ãÂ°´ÂØ´ÊâÄÊúâÊî∂‰ª∂Ë≥áË®ä', 'error');
                return;
            }

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const orderNumber = 'ORD' + Date.now();

            const orderDetails = {
                orderNumber: orderNumber,
                user: currentUser.email,
                recipient: name,
                phone: phone,
                email: email,
                payment: payment,
                items: cart,
                total: total,
                date: new Date().toLocaleString('zh-TW')
            };

            console.log('Ë®ÇÂñÆÂÆåÊàê:', orderDetails);

            alert(`‚úÖ Ë®ÇÂñÆÂ∑≤ÂÆåÊàêÔºÅ\n\nË®ÇÂñÆÁ∑®Ëôü: ${orderNumber}\nÁ∏ΩÈáëÈ°ç: $${total}\n\nÊÑüË¨ùÊÇ®ÁöÑË≥ºË≤∑ÔºÅ`);

            cart = [];
            localStorage.removeItem('cart');
            updateCartCount();

            document.getElementById('recipientName').value = '';
            document.getElementById('recipientPhone').value = '';
            document.getElementById('recipientEmail').value = '';

            goToHome();
            showNotification('Ë®ÇÂñÆÂ∑≤ÊàêÂäüÊèê‰∫§', 'success');
        }

        // ========== Ê®°ÊÖãÊéßÂà∂ ==========
        function openCart() {
            displayCart();
            document.getElementById('cartModal').classList.add('active');
        }

        function closeCart() {
            document.getElementById('cartModal').classList.remove('active');
        }

        function openLogin() {
            document.getElementById('loginModal').classList.add('active');
        }

        function closeLogin() {
            document.getElementById('loginModal').classList.remove('active');
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
        }

        // ========== È†ÅÈù¢Â∞éËà™ ==========
        function goToHome() {
            document.getElementById('homePage').style.display = 'block';
            document.getElementById('shopPage').style.display = 'none';
            document.getElementById('checkoutPage').style.display = 'none';
            window.scrollTo(0, 0);
        }

        function goToShop() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('shopPage').style.display = 'block';
            document.getElementById('checkoutPage').style.display = 'none';
            window.scrollTo(0, 0);
        }

        // ========== ÈÄöÁü• ==========
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // ========== ÈóúÈñâÊ®°ÊÖã ==========
        window.onclick = function(event) {
            const cartModal = document.getElementById('cartModal');
            const loginModal = document.getElementById('loginModal');

            if (event.target === cartModal) {
                closeCart();
            }
            if (event.target === loginModal) {
                closeLogin();
            }
        }

        // ÂàùÂßãÂåñÊáâÁî®
        init();
    </script>
</body>
</html>