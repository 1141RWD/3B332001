<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘• UHS - å…¨å“é¡æœé£¾åº—</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #3f51b5; 
            --secondary-color: #ff9800; 
            --background-light: #f4f7f9;
            --text-dark: #2c3e50;
            --shadow-subtle: 0 4px 6px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        body { 
            font-family: 'Noto Sans TC', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; 
            padding: 0; 
            background-color: var(--background-light); 
            color: var(--text-dark); 
        }
        
        /* é é¢æ¨™é ­ */
        header { 
            background-color: var(--primary-color); 
            color: white; 
            padding: 1.5em 5%; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            position: fixed; 
            top: 0; 
            left: 0;
            right: 0;
            z-index: 1000; 
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); 
            height: 76px; 
            box-sizing: border-box;
        }
        
        /* LOGO å®¹å™¨ */
        .logo-container {
            display: flex;
            align-items: center;
            gap: 10px; /* Logo å’Œæ–‡å­—ä¹‹é–“çš„é–“è· */
        }

        /* LOGO åœ–ç‰‡æ¨£å¼ */
        #brand-logo {
            height: 40px; /* èª¿æ•´ Logo å¤§å° */
            width: auto;
            /* å‡è¨­ LOGO æ˜¯æ·±è‰²ï¼Œåœ¨æ·±è‰²èƒŒæ™¯ä¸‹è½‰ç‚ºç™½è‰² */
            filter: invert(100%); 
        }

        h1 { 
            margin: 0; 
            font-weight: 700; 
            letter-spacing: 1px; 
            font-size: 2em; /* èª¿æ•´æ¨™é¡Œå­—é«”å¤§å° */
        }
        .header-controls { 
            display: flex; 
            gap: 20px;
            align-items: center;
        }
        #search-input {
            padding: 10px 18px; 
            border: none;
            border-radius: 25px; 
            width: 280px;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        #search-input:focus {
            box-shadow: 0 0 0 3px rgba(63, 81, 181, 0.3);
        }
        
        /* === å‹•æ…‹åœ–ç‰‡ Hero Section æ¨£å¼ === */
        #hero-banner {
            height: 550px; 
            background-image: url('https://picsum.photos/1920/1080?random=105'); 
            background-size: cover;
            background-position: center 30%;
            background-attachment: fixed; 
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            margin-top: 76px; 
            position: relative;
        }
        .hero-content {
            text-align: center;
            background: rgba(0, 0, 0, 0.4); 
            padding: 30px 60px;
            border-radius: 10px;
            transform: translateY(0);
            transition: transform 0.8s ease-out; 
        }
        .hero-content h2 {
            font-size: 3em;
            margin-bottom: 10px;
            font-weight: 700;
        }
        .hero-content p {
            font-size: 1.5em;
            font-weight: 300;
        }
        
        /* ä½”ä½ç©ºé–“ */
        #content-wrapper {
            background-color: var(--background-light); 
            min-height: 2000px; 
            position: relative;
            z-index: 50; 
        }
        
        /* ç¯©é¸å™¨ä½ç½®èª¿æ•´: æ–°å¢æ‰‹å‹•è¼¸å…¥æ¬„ä½æ¨£å¼ */
        .filter-controls {
            background-color: #ffffff;
            padding: 15px 5%;
            display: flex;
            flex-wrap: wrap;
            gap: 25px; 
            align-items: center;
            border-bottom: 2px solid var(--primary-color); 
            box-shadow: var(--shadow-subtle);
            position: sticky; 
            top: 76px; 
            z-index: 999;
        }
        .filter-group-top label {
            font-weight: 500; 
            color: var(--text-dark);
            margin-right: 8px;
        }
        .filter-controls select, .filter-controls input[type="range"], .filter-controls input[type="number"] {
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #c0c0c0;
            min-width: 140px;
            transition: border-color 0.3s;
        }
        .filter-controls select:hover, .filter-controls input[type="number"]:hover {
            border-color: var(--secondary-color);
        }
        .price-input-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .price-display {
            font-weight: 700;
            color: var(--primary-color);
            margin-top: 10px;
        }

        /* è³¼ç‰©è»ŠæŒ‰éˆ• */
        .cart-button {
            background-color: var(--secondary-color);
            color: var(--text-dark); 
            border: none;
            padding: 10px 20px;
            border-radius: 25px; 
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 700;
            box-shadow: var(--shadow-subtle);
        }
        .cart-button:hover {
            background-color: #ffb74d; 
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        .cart-button.flash-success {
            transform: scale(1.1);
            background-color: #4CAF50; 
            color: white;
        }

        .main-content { 
            width: 90%; 
            max-width: 1400px; 
            margin: 20px auto; 
        }

        /* ç”¢å“ç¶²æ ¼ (èˆ‡ä¸Šæ¬¡ç›¸åŒ) */
        .product-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
            gap: 30px; 
            padding: 20px 0;
        }
        .product-item { 
            background: white; 
            padding: 25px; 
            border: 1px solid #e0e0e0; 
            border-radius: 12px; 
            text-align: center; 
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: var(--shadow-subtle);
            position: relative; /* ç”¨æ–¼å°ºå¯¸é¡¯ç¤ºå®šä½ */
        }
        .product-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            cursor: pointer;
        }
        .product-item h3 {
            color: var(--primary-color);
            margin-top: 10px;
            font-weight: 500;
        }
        .product-item p {
            font-size: 1.1em;
            font-weight: 700;
            color: #e91e63; 
        }
        /* ç¢ºä¿åœ–ç‰‡æœ‰å”¯ä¸€çš„ class ä¾†è¢« JS æ‰¾åˆ° */
        .product-image-swap {
            max-width: 100%; 
            height: auto; 
            min-height: 200px;
            background-color: #eef1f4; 
            border-radius: 8px; 
            margin-bottom: 10px; 
            object-fit: cover;
            transition: opacity 0.3s; /* åœ–ç‰‡åˆ‡æ›å¹³æ»‘åŒ– */
        }
        .add-to-cart-btn { 
            background-color: var(--primary-color); 
            color: white; 
            border: none; 
            padding: 12px 25px; 
            border-radius: 25px; 
            cursor: pointer; 
            transition: background-color 0.3s, transform 0.2s; 
            font-weight: 700;
            margin-top: 15px;
        }
        .add-to-cart-btn:hover { 
            background-color: #5c6bc0; 
            transform: scale(1.05);
        }
        
        /* é¡è‰²åˆ‡æ›å™¨çš„æ¨£å¼ */
        .color-options-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        .color-swatch {
            width: 22px;
            height: 22px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
            transition: all 0.2s;
        }
        .color-swatch:hover {
            transform: scale(1.1);
            border-color: var(--secondary-color);
        }

        /* æ–°å¢: ç”¢å“å¡ç‰‡ä¸Šçš„å°ºå¯¸é¡¯ç¤º */
        .size-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 8px;
            border-radius: 5px;
            font-size: 0.85em;
            font-weight: 700;
            display: none; /* é è¨­éš±è—ï¼Œåªåœ¨ Hover æ™‚é¡¯ç¤ºæˆ–åœ¨é»æ“Šæ™‚ä½¿ç”¨ */
            pointer-events: none;
        }
        .product-item:hover .size-badge {
            display: block;
        }


        /* Modal æ¨£å¼ (ä¸è®Š) */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); }
        .modal-content { 
            background-color: #fefefe; 
            margin: 10% auto; 
            padding: 40px; 
            border-radius: 10px; 
            width: 90%; 
            max-width: 600px; 
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
            animation: zoomIn 0.3s ease-out; 
        }
        .close-btn { color: #aaa; float: right; font-size: 35px; font-weight: bold; line-height: 1; transition: color 0.2s;}
        .close-btn:hover { color: var(--secondary-color); }
        #cart-items li { list-style: none; padding: 15px 0; border-bottom: 1px dashed #ddd; font-size: 1.05em; display: flex; justify-content: space-between; align-items: center; }
        .item-info { display: flex; align-items: center; gap: 10px; }
        .remove-btn { background: #e57373; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; transition: background 0.3s; font-size: 0.85em; font-weight: 500; }
        .remove-btn:hover { background: #d32f2f; }
        .item-price-quantity { font-weight: 700; color: var(--text-dark); }
        .cart-total-display { font-size: 1.5em; font-weight: 700; color: var(--primary-color); margin-top: 25px; }
        .checkout-btn { background-color: var(--primary-color); font-weight: 700; }
        .checkout-btn:hover { background-color: #5c6bc0; }

        footer { 
            text-align: center; 
            padding: 20px; 
            background: var(--text-dark); 
            color: #bbb; 
            margin-top: 50px; 
            font-size: 0.9em;
        }

        @keyframes zoomIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>
    123

    <header>
        <div class="logo-container">
            <img id="brand-logo" src="https://www.niegobrand.com" alt="UHS Brand Logo">
            <h1>ğŸ‘– UHS</h1>
        </div>
        <div class="header-controls">
            <input type="text" id="search-input" placeholder="ğŸ” æœå°‹è¤²æ¬¾åç¨±..." />
            <button id="cart-btn" class="cart-button">ğŸ›’ è³¼ç‰©è»Š (<span id="cart-count">0</span>)</button>
        </div>
    </header>

    <div id="hero-banner">
        <div class="hero-content">
            <h2>ğŸ‘– æ¢ç´¢ä¸‹ä¸€ä»¶å‘½å®šæœé£¾</h2>
            <p>æ™‚å°šã€èˆ’é©ã€æ©Ÿèƒ½ï¼Œå¾æœªå¦‚æ­¤å®Œç¾èåˆã€‚</p>
        </div>
    </div>

    <div id="content-wrapper">
        
        <section class="filter-controls">
            <div class="filter-group-top">
                <label for="type-select">ç”¢å“é¡å‹:</label>
                <select id="type-select" name="type">
                    <option value="all">æ‰€æœ‰é¡å‹</option>
                    <option value="jacket">å¤–å¥—</option>
                    <option value="shirt">è¥¯è¡«</option>
                    <option value="top">è¡£æœ</option>
                    <option value="vest">èƒŒå¿ƒ</option>
                    <option value="denim">ç‰›ä»”è¤²</option>
                    <option value="chino">ä¼‘é–’è¤²</option>
                    <option value="jogger">é‹å‹•è¤²</option>
                    <option value="briefs">å…§è¤²</option>
                    <option value="gloves">æ‰‹å¥—</option>
                    <option value="socks">è¥ªå­</option>
                    <option value="trend">æ½®ç‰Œ</option>
                </select>
            </div>

            <div class="filter-group-top">
                <label for="length-select">é•·åº¦/æ¨£å¼:</label>
                <select id="length-select" name="length">
                    <option value="all">ä¸é™é•·åº¦/æ¨£å¼</option>
                    <option value="long">é•·ç‰ˆ/é•·è¤²</option>
                    <option value="short">çŸ­ç‰ˆ/çŸ­è¤²</option>
                </select>
            </div>
            
            <div class="filter-group-top">
                <label for="target-select">ç›®æ¨™ç¾¤é«”:</label>
                <select id="target-select" name="target">
                    <option value="all">æ‰€æœ‰ç¾¤é«”</option>
                    <option value="adult">å¤§äºº</option>
                    <option value="kids">å°å­©</option>
                    <option value="elder">è€äºº</option>
                </select>
            </div>

            <div class="filter-group-top">
                <label for="size-select">å°ºå¯¸:</label>
                <select id="size-select" name="size">
                    <option value="all">æ‰€æœ‰å°ºå¯¸</option>
                    <option value="S">S</option>
                    <option value="M">M</option>
                    <option value="L">L</option>
                    <option value="XL">XL</option>
                    <option value="OneSize">å–®ä¸€å°ºå¯¸</option>
                </select>
            </div>
            
            <div class="filter-group-top price-input-group">
                <label>æœ€é«˜åƒ¹æ ¼ (NT$):</label>
                <div>
                    <input type="range" min="50" max="3000" value="3000" id="price-range">
                    <input type="number" min="50" max="3000" value="3000" id="price-input" style="width: 100px; margin-top: 5px;">
                </div>
                <p class="price-display">ç•¶å‰ç¯„åœ: NT$ <span id="price-value">3000</span></p>
            </div>
        </section>

        <div class="main-content">
            
            <section id="products" class="product-grid">
                </section>

        </div>
    </div> 

    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>æˆ‘çš„è³¼ç‰©è»Š</h2>
            <ul id="cart-items">
                </ul>
            <p class="cart-total-display">ç¸½è¨ˆï¼šNT$ <span id="cart-total">0</span></p>
            <button class="checkout-btn" id="checkout-button">å‰å¾€çµå¸³</button>
            <button class="checkout-btn" id="clear-cart-button" style="background-color: #e57373; margin-left: 15px;">æ¸…ç©ºè³¼ç‰©è»Š</button>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 UHS. è¨­è¨ˆèˆ‡é–‹ç™¼ | è‡´åŠ›æ–¼æä¾›æœ€å¥½çš„æœé£¾é«”é©—ã€‚</p>
    </footer>
    
    <script>
        // ç¯„ä¾‹ç”¢å“è³‡æ–™ (å·²æ“´å……å°ºå¯¸æ•¸æ“š)
        const products = [
            // å¤–å¥— (Jacket)
            { id: 18, name: 'è¼•é‡é˜²é¢¨é€£å¸½å¤–å¥—', type: 'jacket', length: 'long', target: 'adult', price: 2500, image: 'https://picsum.photos/300/200?random=60', available_sizes: ['S', 'M', 'L'], color_options: [{ name: 'é»‘', code: '#000000', image: 'https://picsum.photos/300/200?random=60' }, { name: 'ç´…', code: '#c0392b', image: 'https://picsum.photos/300/200?random=61' }] },
            { id: 19, name: 'å…’ç«¥é˜²æ°´è¡é‹’è¡£', type: 'jacket', length: 'long', target: 'kids', price: 1800, image: 'https://picsum.photos/300/200?random=62', available_sizes: ['S', 'M'] },
            // è¥¯è¡« (Shirt)
            { id: 20, name: 'ç¶“å…¸æ ¼ç´‹ä¼‘é–’è¥¯è¡«', type: 'shirt', length: 'long', target: 'adult', price: 1100, image: 'https://picsum.photos/300/200?random=70', available_sizes: ['M', 'L', 'XL'] },
            { id: 21, name: 'å•†å‹™ä¿®èº«ç´”ç™½è¥¯è¡«', type: 'shirt', length: 'long', target: 'adult', price: 1400, image: 'https://picsum.photos/300/200?random=71', available_sizes: ['S', 'M', 'L', 'XL'] },
            // è¡£æœ/Tæ¤ (Top)
            { id: 22, name: 'ç´”æ£‰åœ“é ˜Tæ¤', type: 'top', length: 'short', target: 'adult', price: 450, image: 'https://picsum.photos/300/200?random=80', available_sizes: ['S', 'M', 'L'], color_options: [{ name: 'ç™½', code: '#ffffff', image: 'https://picsum.photos/300/200?random=80' }, { name: 'è—', code: '#3498db', image: 'https://picsum.photos/300/200?random=81' }] },
            { id: 23, name: 'å°èŠ±çŸ­è¢–Tæ¤', type: 'top', length: 'short', target: 'kids', price: 500, image: 'https://picsum.photos/300/200?random=82', available_sizes: ['S', 'M'] },
            // èƒŒå¿ƒ (Vest)
            { id: 24, name: 'æˆ¶å¤–æ©Ÿèƒ½ä¿æš–èƒŒå¿ƒ', type: 'vest', length: 'short', target: 'elder', price: 1750, image: 'https://picsum.photos/300/200?random=90', available_sizes: ['L', 'XL'] },

            // é•·è¤²/çŸ­è¤²é¡
            { id: 1, name: 'ç¶“å…¸ç›´ç­’ç‰›ä»”é•·è¤²', type: 'denim', length: 'long', target: 'adult', price: 1280, image: 'https://picsum.photos/300/200?random=10', available_sizes: ['M', 'L'], color_options: [ { name: 'ç¶“å…¸è—', code: '#3a7bd5', image: 'https://picsum.photos/300/200?random=10' }, { name: 'æ·±é»‘è‰²', code: '#2c3e50', image: 'https://picsum.photos/300/200?random=100' }, { name: 'æ°´æ´—ç°', code: '#95a5a6', image: 'https://picsum.photos/300/200?random=101' }, ] },
            { id: 4, name: 'é«˜è…°å½ˆæ€§ç…™ç®¡ç‰›ä»”è¤²', type: 'denim', length: 'long', target: 'adult', price: 1650, image: 'https://picsum.photos/300/200?random=11', available_sizes: ['S', 'M'], color_options: [ { name: 'æ·±è—è‰²', code: '#1e3799', image: 'https://picsum.photos/300/200?random=11' }, { name: 'ç™½è‰²', code: '#ffffff', image: 'https://picsum.photos/300/200?random=110' }, { name: 'åœŸè€³å…¶ç¶ ', code: '#00cec9', image: 'https://picsum.photos/300/200?random=111' }, ] },
            { id: 7, name: 'æ·±è‰²åˆèº«ç‰›ä»”è¤²', type: 'denim', length: 'long', target: 'adult', price: 1350, image: 'https://picsum.photos/300/200?random=12', available_sizes: ['L', 'XL'] },
            { id: 9, name: 'å…’ç«¥è¼•ç£…ç‰›ä»”è¤²', type: 'denim', length: 'long', target: 'kids', price: 890, image: 'https://picsum.photos/300/200?random=13', available_sizes: ['S', 'M'] },
            { id: 2, name: 'ä¿®èº«å¡å…¶ä¼‘é–’é•·è¤²', type: 'chino', length: 'long', target: 'adult', price: 990, image: 'https://picsum.photos/300/200?random=20', available_sizes: ['S', 'M', 'L'], color_options: [ { name: 'å¡å…¶è‰²', code: '#d2b48c', image: 'https://picsum.photos/300/200?random=20' }, { name: 'æµ·è»è—', code: '#2c3e50', image: 'https://picsum.photos/300/200?random=200' }, { name: 'è»ç¶ è‰²', code: '#54795b', image: 'https://picsum.photos/300/200?random=201' }, ] },
            { id: 5, name: 'è¼•è–„äºéº»ä¹åˆ†ä¼‘é–’è¤²', type: 'chino', length: 'long', target: 'elder', price: 850, image: 'https://picsum.photos/300/200?random=21', available_sizes: ['L', 'XL'] },
            { id: 8, name: 'å¤å­£ä¼‘é–’çŸ­è¤²', type: 'chino', length: 'short', target: 'adult', price: 780, image: 'https://picsum.photos/300/200?random=22', available_sizes: ['S', 'M', 'L'] },
            { id: 10, name: 'å¿«ä¹¾å¤šå£è¢‹çŸ­è¤²', type: 'chino', length: 'short', target: 'adult', price: 1100, image: 'https://picsum.photos/300/200?random=23', available_sizes: ['XL'] },
            { id: 3, name: 'å…’ç«¥é‹å‹•çŸ­è¤²', type: 'jogger', length: 'short', target: 'kids', price: 550, image: 'https://picsum.photos/300/200?random=30', available_sizes: ['S'] },
            { id: 11, name: 'åˆ·æ¯›ä¿æš–æ…¢è·‘é•·è¤²', type: 'jogger', length: 'long', target: 'adult', price: 1400, image: 'https://picsum.photos/300/200?random=31', available_sizes: ['M', 'L'] },
            { id: 12, name: 'è€äººå¯¬é¬†é‹å‹•è¤²', type: 'jogger', length: 'long', target: 'elder', price: 950, image: 'https://picsum.photos/300/200?random=32', available_sizes: ['L', 'XL'] },
            
            // å…§è¤² (Briefs) å’Œé…ä»¶ (OneSize)
            { id: 6, name: 'ç”·å£«ç´”æ£‰å¹³è§’å…§è¤²', type: 'briefs', length: 'short', target: 'adult', price: 150, image: 'https://picsum.photos/300/200?random=40', available_sizes: ['M', 'L'] },
            { id: 13, name: 'å¥³æ€§ç„¡ç—•å…§è¤²ä¸‰ä»¶çµ„', type: 'briefs', length: 'short', target: 'adult', price: 499, image: 'https://picsum.photos/300/200?random=41', available_sizes: ['OneSize'] },
            { id: 14, name: 'å¬°å…’è¨“ç·´è¤²', type: 'briefs', length: 'short', target: 'kids', price: 200, image: 'https://picsum.photos/300/200?random=42', available_sizes: ['S'] },
            { id: 15, name: 'è¡—é ­è¿·å½©å·¥è£é•·è¤²', type: 'trend', length: 'long', target: 'adult', price: 2150, image: 'https://picsum.photos/300/200?random=50', available_sizes: ['M', 'L'] },
            { id: 16, name: 'æ—¥ç³»å¯¬ç‰ˆæŸå£é•·è¤²', type: 'trend', length: 'long', target: 'adult', price: 1880, image: 'https://picsum.photos/300/200?random=51', available_sizes: ['L', 'XL'] },
            { id: 17, name: 'å€‹æ€§å°èŠ±çŸ­è¤²', type: 'trend', length: 'short', target: 'adult', price: 1550, image: 'https://picsum.photos/300/200?random=52', available_sizes: ['M'] },
            { id: 25, name: 'é˜²æ»‘ç¾Šæ¯›æ‰‹å¥—', type: 'gloves', length: 'short', target: 'adult', price: 650, image: 'https://picsum.photos/300/200?random=150', available_sizes: ['OneSize'] },
            { id: 26, name: 'æˆ¶å¤–ç™»å±±é•·è¥ª', type: 'socks', length: 'long', target: 'adult', price: 250, image: 'https://picsum.photos/300/200?random=160', available_sizes: ['OneSize'] },
        ];

        let cart = []; 

        // DOM å…ƒç´ å¼•ç”¨
        const productGrid = document.getElementById('products');
        const searchInput = document.getElementById('search-input');
        const priceRange = document.getElementById('price-range');
        const priceInput = document.getElementById('price-input'); 
        const priceValueSpan = document.getElementById('price-value');
        
        const typeSelect = document.getElementById('type-select');
        const lengthSelect = document.getElementById('length-select');
        const targetSelect = document.getElementById('target-select');
        const sizeSelect = document.getElementById('size-select'); // æ–°å¢å°ºå¯¸ç¯©é¸å¼•ç”¨
        
        const cartBtn = document.getElementById('cart-btn');
        const cartCountSpan = document.getElementById('cart-count');
        const cartModal = document.getElementById('cart-modal');
        const closeModal = document.querySelector('.close-btn');
        const cartItemsUl = document.getElementById('cart-items');
        const cartTotalSpan = document.getElementById('cart-total');
        const checkoutButton = document.getElementById('checkout-button');
        const clearCartButton = document.getElementById('clear-cart-button'); 

        
        const heroBanner = document.getElementById('hero-banner'); 
        const heroContent = document.querySelector('.hero-content'); 


        // --- æ ¸å¿ƒåŠŸèƒ½: ç¯©é¸ã€æœå°‹èˆ‡æ¸²æŸ“ ---
        function getActiveFilters() {
            const filters = {};
            filters.type = typeSelect.value;
            filters.length = lengthSelect.value;
            filters.target = targetSelect.value;
            filters.size = sizeSelect.value; // ç²å–é¸å®šçš„å°ºå¯¸
            
            // è®€å–åƒ¹æ ¼ç¯©é¸ï¼šå„ªå…ˆè®€å–æ‰‹å‹•è¼¸å…¥ï¼Œå¦‚æœç„¡æ•ˆå‰‡è®€å– Range Slider
            let maxPrice = parseInt(priceInput.value);
            if (isNaN(maxPrice) || maxPrice < 50 || maxPrice > 3000) {
                 maxPrice = parseInt(priceRange.value);
            }
            filters.maxPrice = maxPrice;

            filters.searchTerm = searchInput.value.toLowerCase();
            return filters;
        }

        function filterAndRenderProducts() {
            const filters = getActiveFilters();
            
            // æ›´æ–°åƒ¹æ ¼é¡¯ç¤ºï¼ˆåŸºæ–¼ç¯©é¸é‚è¼¯æ‰€ä½¿ç”¨çš„å¯¦éš›å€¼ï¼‰
            priceValueSpan.textContent = filters.maxPrice;

            const filteredProducts = products.filter(product => {
                const typeMatch = (filters.type === 'all') || (product.type === filters.type);
                const lengthMatch = (filters.length === 'all') || (product.length === filters.length);
                const targetMatch = (filters.target === 'all') || (product.target === filters.target);
                const priceMatch = product.price <= filters.maxPrice;
                const searchMatch = product.name.toLowerCase().includes(filters.searchTerm);
                
                // æ–°å¢å°ºå¯¸ç¯©é¸é‚è¼¯
                const sizeMatch = (filters.size === 'all') || (product.available_sizes && product.available_sizes.includes(filters.size));

                return typeMatch && lengthMatch && targetMatch && priceMatch && searchMatch && sizeMatch;
            });
            
            productGrid.innerHTML = ''; 
            if (filteredProducts.length === 0) {
                productGrid.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; font-size: 1.2em;">æŠ±æ­‰ï¼Œæ²’æœ‰æ‰¾åˆ°ç¬¦åˆæ‚¨æ¢ä»¶çš„å•†å“ã€‚</p>';
            } else {
                filteredProducts.forEach(product => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'product-item';
                    
                    // é¡è‰²é¸é …æ¸²æŸ“
                    let colorOptionsHtml = '';
                    let defaultColorName = '';
                    let totalColors = 0;

                    if (product.color_options && product.color_options.length > 0) {
                        totalColors = product.color_options.length;
                        defaultColorName = product.color_options[0].name;

                        colorOptionsHtml = product.color_options.map(option => `
                            <div 
                                class="color-swatch" 
                                data-product-id="${product.id}"
                                data-image="${option.image}" 
                                data-name="${option.name}"
                                style="background-color: ${option.code};"
                                title="${option.name}"
                            ></div>
                        `).join('');
                        colorOptionsHtml = `<div class="color-options-container">${colorOptionsHtml}</div>`;
                    } else if (product.available_sizes && product.available_sizes.includes('OneSize')) {
                         // å°æ–¼é…ä»¶é¡ï¼Œå¦‚æœæ²’æœ‰é¡è‰²ä½†æœ‰ OneSizeï¼Œä¹Ÿè¨­å®šé è¨­é¡è‰²ç‚º 'ç„¡'
                        defaultColorName = 'ç„¡';
                    }

                    // å°ºå¯¸å¾½ç« é¡¯ç¤º (é¡ä¼¼ GU å®˜ç¶²ï¼Œç”¨æ–¼æç¤ºå°ºå¯¸)
                    const sizeBadgeHtml = product.available_sizes ? `<div class="size-badge">å°ºå¯¸: ${product.available_sizes.join(', ')}</div>` : '';


                    itemDiv.innerHTML = `
                        ${sizeBadgeHtml}
                        <img src="${product.image}" alt="${product.name}" loading="lazy" class="product-image-swap" id="product-img-${product.id}">
                        <h3>${product.name}</h3>
                        <p>NT$ <span>${product.price}</span></p>
                        ${colorOptionsHtml}
                        <button class="add-to-cart-btn" data-id="${product.id}" data-name="${product.name}" data-price="${product.price}" data-default-color="${defaultColorName}">åŠ å…¥è³¼ç‰©è»Š</button>
                    `;
                    productGrid.appendChild(itemDiv);
                });
            }
        }
        
        // è³¼ç‰©è»ŠåŠŸèƒ½ä¿æŒä¸è®Š
        function clearCart() {
            if (confirm('æ‚¨ç¢ºå®šè¦æ¸…ç©ºè³¼ç‰©è»Šå—ï¼Ÿ')) {
                cart = [];
                updateCartDisplay();
            }
        }

        function removeFromCart(productId) {
            const index = cart.findIndex(item => item.id === productId); 
            if (index > -1) {
                if (cart[index].quantity > 1) {
                    cart[index].quantity--;
                } else {
                    cart.splice(index, 1);
                }
                updateCartDisplay();
            }
        }

        function checkout() {
            if (cart.length === 0) {
                alert('æ‚¨çš„è³¼ç‰©è»Šæ˜¯ç©ºçš„ï¼Œç„¡æ³•çµå¸³ã€‚');
                return;
            }
            const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            alert(`
                âœ… çµå¸³æˆåŠŸï¼
                
                ç¸½é‡‘é¡ï¼šNT$ ${total}
                æ„Ÿè¬æ‚¨çš„è³¼è²·ï¼
            `);
            cart = [];
            cartModal.style.display = 'none'; 
            updateCartDisplay(); 
        }

        function updateCartDisplay() {
            cartItemsUl.innerHTML = ''; 
            let total = 0;
            let totalItems = 0;

            if (cart.length === 0) {
                cartItemsUl.innerHTML = '<li>è³¼ç‰©è»Šè£¡é‚„æ²’æœ‰å•†å“ã€‚</li>';
            } else {
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    totalItems += item.quantity;
                    
                    const colorDisplay = item.selectedColor && item.selectedColor !== 'ç„¡' ? ` (${item.selectedColor})` : '';

                    const li = document.createElement('li');
                    li.innerHTML = `
                        <div class="item-info">
                            <span style="width: 250px;">${item.name}${colorDisplay}</span>
                            <span class="item-price-quantity">${item.quantity} ä»¶ (NT$ ${itemTotal})</span>
                        </div>
                        <button class="remove-btn" data-id="${item.id}">åˆªé™¤</button>
                    `;
                    cartItemsUl.appendChild(li);
                });
            }

            cartTotalSpan.textContent = total;
            cartCountSpan.textContent = totalItems;
        }

        function addToCart(productId, selectedColor = null) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            // å¦‚æœå•†å“æœ‰é¡è‰²é¸é …ä½†æœªæŒ‡å®šé¡è‰²ï¼Œå‰‡ä½¿ç”¨ç¬¬ä¸€å€‹é¡è‰²ä½œç‚ºé è¨­
            if (!selectedColor && product.color_options && product.color_options.length > 0) {
                selectedColor = product.color_options[0].name;
            } else if (!selectedColor && product.available_sizes && product.available_sizes.includes('OneSize')) {
                // å¦‚æœæ˜¯ OneSize çš„é…ä»¶ï¼Œé è¨­é¡è‰²ç‚º 'ç„¡'
                selectedColor = 'ç„¡';
            }

            // è³¼ç‰©è»Šä¸­å°‹æ‰¾æ˜¯å¦å·²å­˜åœ¨ç›¸åŒ ID å’Œé¡è‰²çš„å•†å“
            const existingItem = cart.find(item => item.id === productId && item.selectedColor === selectedColor);

            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ 
                    id: product.id, 
                    name: product.name, 
                    price: product.price, 
                    quantity: 1,
                    selectedColor: selectedColor 
                });
            }
            
            cartBtn.classList.add('flash-success');
            setTimeout(() => {
                cartBtn.classList.remove('flash-success');
            }, 500);

            updateCartDisplay();
        }

        // --- å‹•æ…‹æ•ˆæœï¼šæ»¾å‹•åµæ¸¬èˆ‡ Hero Banner å‹•ç•« ---
        function handleScroll() {
            const scrollPos = window.scrollY;
            const heroHeight = heroBanner.offsetHeight;
            
            if (scrollPos < heroHeight) {
                const opacity = 1 - (scrollPos / heroHeight) * 1.5;
                heroContent.style.opacity = Math.max(0, opacity);
                
                const translateY = scrollPos * 0.5;
                heroContent.style.transform = `translateY(${translateY}px)`;
            } else {
                heroContent.style.opacity = 0;
            }
        }
        
        // --- äº‹ä»¶ç›£è½å™¨è¨­å®š ---

        // åƒ¹æ ¼åŒæ­¥èˆ‡ç¯©é¸é‚è¼¯
        priceRange.addEventListener('input', (e) => {
            priceInput.value = e.target.value;
            filterAndRenderProducts();
        });
        
        priceInput.addEventListener('input', (e) => {
            // ç¢ºä¿è¼¸å…¥å€¼åœ¨ç¯„åœå…§ï¼Œä¸¦åŒæ­¥ Range Slider
            let val = parseInt(e.target.value);
            if (val < 50) val = 50;
            if (val > 3000) val = 3000;
            e.target.value = val;
            priceRange.value = val;
            filterAndRenderProducts();
        });

        // æ–°å¢å°ºå¯¸ç¯©é¸å™¨çš„äº‹ä»¶ç›£è½
        sizeSelect.addEventListener('change', filterAndRenderProducts);


        window.addEventListener('scroll', handleScroll);

        // ç¯©é¸å™¨çš„äº‹ä»¶ç›£è½éƒ½æŒ‡å‘ filterAndRenderProducts
        typeSelect.addEventListener('change', filterAndRenderProducts);
        lengthSelect.addEventListener('change', filterAndRenderProducts);
        targetSelect.addEventListener('change', filterAndRenderProducts);

        searchInput.addEventListener('input', filterAndRenderProducts);
        
        cartBtn.addEventListener('click', () => { 
            updateCartDisplay(); 
            cartModal.style.display = 'block'; 
        });
        closeModal.addEventListener('click', () => { cartModal.style.display = 'none'; });
        window.addEventListener('click', (event) => { if (event.target == cartModal) { cartModal.style.display = 'none'; } });

        // é»æ“ŠåŠ å…¥è³¼ç‰©è»Šå’Œé¡è‰²åˆ‡æ›çš„é‚è¼¯
        productGrid.addEventListener('click', (e) => {
            if (e.target.classList.contains('add-to-cart-btn')) {
                const productId = parseInt(e.target.dataset.id);
                
                // ç²å–æŒ‰éˆ•ä¸Šæœ€æ–°çš„é¡è‰²æ•¸æ“š
                const selectedColor = e.target.dataset.defaultColor || null; 
                
                addToCart(productId, selectedColor);
            } 
            
            // é¡è‰²åˆ‡æ›åŠŸèƒ½ (é©šå¥‡åŠŸèƒ½)
            if (e.target.classList.contains('color-swatch')) {
                const swatch = e.target;
                const newImageSrc = swatch.dataset.image;
                const selectedColorName = swatch.dataset.name;
                
                const productItem = swatch.closest('.product-item');
                const productImage = productItem.querySelector('.product-image-swap');
                const cartButton = productItem.querySelector('.add-to-cart-btn');
                
                if (productImage && newImageSrc) {
                    // è¦–è¦ºæ•ˆæœï¼šå¢åŠ ä¸€å€‹çŸ­æš«çš„é€æ˜åº¦å‹•ç•«
                    productImage.style.opacity = 0.3;
                    setTimeout(() => {
                        productImage.src = newImageSrc; 
                        productImage.style.opacity = 1;
                    }, 100); 

                    // é—œéµæ­¥é©Ÿï¼šæ›´æ–°è³¼ç‰©è»ŠæŒ‰éˆ•ä¸Šçš„æ•¸æ“šå±¬æ€§ï¼Œä»¥ä¾¿ addToCart å¯ä»¥ç²å–é¸å®šçš„é¡è‰²
                    if (cartButton) {
                         // å°‡é¸ä¸­çš„é¡è‰²åç¨±å­˜åˆ° data å±¬æ€§ä¸­ï¼Œä¾›é»æ“Šã€ŒåŠ å…¥è³¼ç‰©è»Šã€æ™‚è®€å–
                         cartButton.dataset.defaultColor = selectedColorName; 
                    }
                }
            }
        });
        
        cartItemsUl.addEventListener('click', (e) => {
            if (e.target.classList.contains('remove-btn')) {
                const productId = parseInt(e.target.dataset.id);
                // æ³¨æ„: é€™è£¡ç°¡åŒ–ç‚ºæŒ‰ ID ç§»é™¤ï¼Œä¸æœƒè€ƒæ…®é¡è‰²å·®ç•°ã€‚
                removeFromCart(productId);
            }
        });
        
        checkoutButton.addEventListener('click', checkout);
        if (clearCartButton) { 
            clearCartButton.addEventListener('click', clearCart);
        }


        // é é¢åˆå§‹åŒ–
        filterAndRenderProducts();
        updateCartDisplay();
        handleScroll();
    </script>
</body>
</html>
